/**
 * aei.js
 * Copyright (c) 2012 Adrian Demleitner
 * https://github.com/ichbinadrian/aei.js
 * Licensed under CC BY 3.0 : http://creativecommons.org/licenses/by/3.0/
 *
 * @author <a href="mailto:ja@ichbinadrian.ch">Adrian Demleitner</a>
 * @version 1.0
 */var aei=function(){var an_image=function(){this.id=undefined;this.target=undefined;this.animating=!1;this.backwards=!1;this.images=[];this.durations=[];this.i_i=0;this.d_i=0;this.timer=undefined};an_image.prototype.run=function(){this.halt();this.create_timer();this.animating=!0};an_image.prototype.nextFrame=function(){this.backwards=!1;this.next_frame()};an_image.prototype.lastFrame=function(){this.backwards=!0;this.next_frame()};an_image.prototype.halt=function(){clearInterval(this.timer);this.animating=!1};an_image.prototype.toggle=function(){this.animating?this.halt():this.run()};an_image.prototype.reverse=function(){this.backwards?this.backwards=!1:this.backwards=!0};an_image.prototype.reset=function(){this.halt();this.target.src=this.images[0]};an_image.prototype.next_frame=function(){if(!this.backwards){this.i_i===this.images.length-1?this.i_i=0:this.i_i++;this.durations.length>1&&(this.d_i===this.durations.length-1?this.d_i=0:this.d_i++)}else{this.i_i===0?this.i_i=this.images.length-1:this.i_i--;this.durations.length>1&&(this.d_i===0?this.d_i=this.durations.length-1:this.d_i--)}this.target.src=this.images[this.i_i];if(this.durations.length>1){clearInterval(this.timer);this.create_timer()}};an_image.prototype.create_timer=function(){this.timer=setInterval(function(a){return function(){a.next_frame()}}(this),this.durations[this.d_i])};var ris=[],get_image_srcs_by_name=function(a){var b=document.images,c=[];for(var d in b){var e=String(b[d].name);e.indexOf(a)||c.push(b[d].src)}return c},register_an_image=function(a,b){var c=b,d=new an_image;if(typeof a=="string"){d.id=a;d.target=document.getElementById(a)}else{d.id=a.name;d.target=a}if(c[1]instanceof Array){if(typeof c[1][0]=="string")d.images=c[1];else if(typeof c[1][0]=="number"){d.images=get_image_srcs_by_name(d.target.name);d.durations=c[1]}}else if(typeof c[1]=="number"){d.images=get_image_srcs_by_name(d.target.name);d.durations=[c[1]]}c[2]instanceof Array?d.durations=c[2]:typeof c[2]=="number"&&(d.durations=[c[2]]);return d},execute_function=function(f,a){if(a[0])for(var ri in ris)a[0].indexOf(ris[ri].id)||eval("ris[ri]."+f+"();");else for(var ri in ris)eval("ris[ri]."+f+"();")};return{register:function(){if(arguments[0]instanceof Array)for(var a in arguments[0]){var b=register_an_image(arguments[0][a],arguments);ris[b.id]=b}else{var b=register_an_image(arguments[0],arguments);ris[b.id]=b}return this},run:function(){execute_function("run",arguments);return this},halt:function(){execute_function("halt",arguments);return this},toggle:function(){execute_function("toggle",arguments);return this},reverse:function(){execute_function("reverse",arguments);return this},reset:function(){execute_function("reset",arguments);return this},nextFrame:function(){execute_function("nextFrame",arguments);return this},lastFrame:function(){execute_function("lastFrame",arguments);return this}}}();